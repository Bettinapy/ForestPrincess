{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/scripts/loaders.js","webpack:///./src/scripts/dashboard/sound.js","webpack:///./src/scripts/collision/pos-converter.js","webpack:///./src/scripts/levels/level-draw.js","webpack:///./src/scripts/sprite.js","webpack:///./src/scripts/sprite-load.js","webpack:///./src/scripts/levels/matrix.js","webpack:///./src/scripts/collision/tile-collider.js","webpack:///./src/scripts/collision/characters-collider.js","webpack:///./src/scripts/collision/drop.js","webpack:///./src/scripts/levels/layers.js","webpack:///./src/scripts/movements/vectors.js","webpack:///./src/scripts/movements/moving_objects_boundaries.js","webpack:///./src/scripts/movements/moving_objects.js","webpack:///./src/scripts/movements/jump.js","webpack:///./src/scripts/movements/run.js","webpack:///./src/scripts/dashboard/timer.js","webpack:///./src/scripts/player.js","webpack:///./src/scripts/movements/enemy_walk.js","webpack:///./src/scripts/fixed-time-loop.js","webpack:///./src/scripts/keyboard-input.js","webpack:///./src/scripts/camera.js","webpack:///./src/scripts/dashboard/dashboard-draw.js","webpack:///./src/scripts/dashboard/button.js","webpack:///./src/scripts/game.js","webpack:///./src/scripts/princess.js","webpack:///./src/scripts/enemies.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","loadImage","url","Promise","resolve","image","Image","addEventListener","src","Sound","this","sound","document","createElement","setAttribute","style","display","body","appendChild","loop","num","volume","play","pause","PosConverter","matrix","tileSize","pos","Math","floor","pos1","pos2","posMax","ceil","range","push","posToIndex","iX","iY","tile","ytop","ybottom","xleft","xright","matches","posToIndexRange","forEach","match","getByIndex","posX","posY","createGroundLayer","sprites","tilesMatrix","tilesConvert","groundBuffer","height","width","groundBufferContext","getContext","context","camera","cameraWidth","size","x","drawFrom","start","end","clearRect","col","table","y","drawTile","redraw","drawImage","createMainBgLayer","mainBg","mainBgBuffer","mainBgBufferContext","draw","createCharacterLayer","character","characterBuffer","characterBufferContext","Sprite","tiles","Map","oppoEles","map","flip","ele","eleContext","scale","translate","set","resizeX","resizeY","loadBackgroundLayers","then","mainImg","Matrix","window","TileCollider","vel","getByRange","walk","enemyDir","distance","CharactersCollider","characters","obj","result","boundaries","isCollide","console","log","Drop","Layer","layers","Set","charactersCollider","tileCollider","characterDrop","gameOver","layer","timestep","jump","update","run","player","checkCollisionX","checkCollisionY","check","reset","Vector","setVector","MovingObjectBoundary","getBottom","getTop","getLeft","getRight","MovingObject","Jump","duration","exactTime","velocityY","velocityX","setVolumne","Run","speed","dir","abs","Timer","time","timerBuffer","timerBufferContext","font","fillStyle","fillText","round","Player","score","timer","updateTime","resetTime","EnemyWalk","FixedTimeLoop","new_time_stamp","accumulated_time","requestId","undefined","timestamp","cancelAnimationFrame","requestAnimationFrame","KeyboardInput","rightPressed","leftPressed","spacePressed","keyDownHandler","keyUpHandler","event","preventDefault","keyCode","stop","Camera","createTitleLayer","text","titleBuffer","titleBufferContext","textAlign","createButtonLayer","button","buttonBuffer","buttonBufferContext","measureText","fontSize","textX","textY","beginPath","moveTo","arcTo","strokeStyle","stroke","hovered","fill","Button","canvas","clicked","offsetLeft","offsetTop","hoverHandler","clickHandler","buttonLayer","clientX","clientY","mousePos","last_click","handler","Game","ctx","startMusic","gameOverMusic","buttonMusic","playerMusic","gameOverView","buttons","bgs","all","bg","game","startBtn","hover","e","click","removeEventListener","level","jungleImg","jungleTiles","fetch","response","clone","json","princessIdleImg","princessIdle","princessRunImg","princessRun","pIdle","pRun","princess","pRuns","pRunsIdx","length","enemyWalkImg","enemyWalk","enemy","eWalks","enemyWalkIdx","backgrounds","background","ranges","x1","x2","y1","y2","createDashboardLayer","add","listenKeys","fixedLoop","restartBtn","quitBtn","showMainPage","getElementsByTagName","alpha"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export function loadImage(url) {\n  /*\n   * We are going to return a Promise which, when we .then\n   * will give us an Image that should be fully loaded\n   */\n  return new Promise((resolve) => {\n    /*\n     * Create the image that we are going to use to\n     * to hold the resource\n     */\n    const image = new Image();\n    /*\n     * The Image API deals in even listeners and callbacks\n     * we attach a listener for the \"load\" event which fires\n     * when the Image has finished the network request and\n     * populated the Image with data\n     */\n    image.addEventListener(\"load\", () => {\n      /*\n       * You have to manually tell the Promise that you are\n       * done dealing with asynchronous stuff and you are ready\n       * for it to give anything that attached a callback\n       * through .then a realized value.  We do that by calling\n       * resolve and passing it the realized value\n       */\n      resolve(image);\n    });\n    /*\n     * Setting the Image.src is what starts the networking process\n     * to populate an image.  After you set it, the browser fires\n     * a request to get the resource.  We attached a load listener\n     * which will be called once the request finishes and we have\n     * image data\n     */\n    image.src = url;\n  });\n}\n\nexport function loadLevel(level) {\n\n  return fetch(`src/scripts/levels/${level}.json`)\n    .then((response) => {\n    \n        return(response.clone().json())\n    });\n}\n","class Sound{\n    constructor(src){\n        this.sound = document.createElement(\"audio\");\n        this.sound.src = src;\n        this.sound.setAttribute(\"preload\", \"auto\");\n        this.sound.setAttribute(\"controls\", \"none\");\n        this.sound.style.display = \"none\";\n        document.body.appendChild(this.sound);\n    }\n    \n    loop(){\n        this.sound.loop = true;\n    }\n\n    setVolumne(num){\n        this.sound.volume = num;\n    }\n\n    play(){\n        this.sound.play();\n    }\n\n    pause(){\n        this.sound.pause();\n    }\n\n}\n\nexport default Sound;","// conver the real world position to index\nclass PosConverter{\n    constructor(matrix, tileSize=30){\n        this.matrix = matrix;\n        this.tileSize = tileSize;\n    }\n\n    posToIndex(pos){\n        return Math.floor(pos/this.tileSize)\n    }\n\n    posToIndexRange(pos1, pos2){\n        const posMax = Math.ceil(pos2/this.tileSize) * this.tileSize\n        const range = [];\n        while(pos1 < posMax){\n            range.push(this.posToIndex(pos1));\n            pos1 += this.tileSize;\n        }\n        return range;\n    }\n\n    getByIndex(iX, iY){\n        const tile = this.matrix.get(iX, iY);\n        const ytop = iY* this.tileSize;\n        const ybottom = ytop + this.tileSize;\n        const xleft = iX * this.tileSize;\n        const xright = xleft + this.tileSize;\n\n        if(tile){\n            return {\n                tile,\n                ytop,\n                ybottom, \n                xleft,\n                xright \n            }\n        }\n    }\n\n    getByRange(xleft, xright, ybottom, ytop){\n        const matches = [];\n        this.posToIndexRange(xleft, xright).forEach(iX => {\n            this.posToIndexRange(ybottom, ytop).forEach(iY=>{\n                const match = this.getByIndex(iX, iY);\n                if(match){\n                    matches.push(match)\n                }\n            })\n        })\n        return matches;\n    }\n\n    matchPos(posX, posY){\n       \n        return this.getByIndex(this.posToIndex(posX), this.posToIndex(posY))\n    }\n\n}\n\nexport default PosConverter;","import PosConverter from '../collision/pos-converter';\n\nexport function drawGround(background, context, sprites) {\n\n  background.ranges.forEach(([x1, x2, y1, y2]) => {\n\n    for (let x = x1; x < x2; x++) {\n      for (let y = y1; y < y2; y++) {\n        sprites.drawTile(background.tile, context, x, y);\n      }\n    }\n  });\n}\n\nexport function createGroundLayer(sprites, tilesMatrix){\n  const tilesConvert = new PosConverter(tilesMatrix);\n\n  const groundBuffer = document.createElement('canvas');\n  groundBuffer.height = 390;\n  groundBuffer.width = 600+600;\n  const groundBufferContext = groundBuffer.getContext('2d');\n\n  function redraw(start, end){\n    groundBufferContext.clearRect(0,0,groundBuffer.width,groundBuffer.height);\n    for(let x=start; x<=end; x++){\n      const col = tilesMatrix.table[x];\n      if(col){\n        col.forEach((tile, y) => {\n          sprites.drawTile(tile.name, groundBufferContext, x-start, y)\n        })\n      }\n    }\n    \n  } \n\n  return function drawGroundLayer(context, camera){\n    const cameraWidth = tilesConvert.posToIndex(camera.size.x);\n    const drawFrom = tilesConvert.posToIndex(camera.pos.x);\n    const drawTo = cameraWidth + drawFrom;\n    redraw(drawFrom, drawTo)\n    context.drawImage(groundBuffer, Math.floor(-camera.pos.x % 30), Math.floor(-camera.pos.y));\n  }\n}\n\nexport function createMainBgLayer(mainBg){\n  const mainBgBuffer = document.createElement('canvas');\n  mainBgBuffer.height = 390;\n  mainBgBuffer.width = 600 + 50;\n  const mainBgBufferContext = mainBgBuffer.getContext('2d');\n  \n  return function drawMainBgLayer(context){\n    mainBgBufferContext.clearRect(0,0,mainBgBuffer.width,mainBgBuffer.height);\n    mainBg.draw(\"mainBg\", mainBgBufferContext, 0, 0, 2, 2);\n    context.drawImage(mainBgBuffer, 0, 0)\n\n  }\n}\n\nexport function createCharacterLayer(character){\n  const characterBuffer = document.createElement('canvas');\n  characterBuffer.height = 60;\n  characterBuffer.width = 60;\n  const characterBufferContext = characterBuffer.getContext('2d');\n  return function drawCharacterLayer(context, camera){\n    characterBufferContext.clearRect(0, 0, 60, 60);\n    character.draw(characterBufferContext);\n\n    context.drawImage(\n      characterBuffer, \n      character.pos.x - camera.pos.x, \n      character.pos.y - camera.pos.y\n      )\n    //princess.draw(context)\n  }\n}\n\n\nexport function createDashboardLayer(player) {\n  return function drawDashboardLayer(context, camera) {\n\n    player.timer.draw(context, 450, 50)\n  }\n}\n\n\nexport function createTileMatrix(backgrounds, tiles){\n  backgrounds.forEach(background => {\n    background.ranges.forEach(([x1, x2, y1, y2]) => {\n  \n      for (let x = x1; x < x2; x++) {\n        for (let y = y1; y < y2; y++) {\n          tiles.set(x, y, {name: background.tile})\n        }\n      }\n    });\n\n  })\n}","class Sprite {\n    constructor(image, width, height) {\n        this.image = image;\n        this.width = width;\n        this.height = height;\n        // this.tiles store all created sprites\n        this.tiles = new Map();\n    }\n\n    create(name, x, y, width, height){\n        const oppoEles = [false, true].map(flip => {\n            if(!width) width = this.width;\n            if(!height) height = this.height;\n            const ele = document.createElement('canvas');\n            ele.height = height;\n            ele.width = width;\n            const eleContext = ele.getContext('2d');\n\n            if(flip){\n                // rotate canvas horizontally\n                eleContext.scale(-1,1);\n                // hard coded here  \n                eleContext.translate(-15, 0);\n            }\n            \n            eleContext.drawImage(\n                this.image,\n                x,\n                y,\n                width,\n                height,\n                0,0,\n                width,\n                height\n            );\n\n            return ele;\n        })\n        this.tiles.set(name, oppoEles)\n    }\n\n    draw(name, context, x, y, resizeX=1, resizeY=1, flip=false){\n        const ele = this.tiles.get(name)[flip ? 1 : 0];\n        context.drawImage(ele, x, y, this.width*resizeX, this.height*resizeY);        \n    }\n\n    drawTile(name, context, x, y, resizeX = 1, resizeY = 1, flip=false) {\n        const ele = this.tiles.get(name)[flip ? 1 : 0];\n    \n        context.drawImage(ele, x*this.width, y*this.height, this.width * resizeX, this.height * resizeY);\n    }\n}\n\nexport default Sprite;","import Sprite from './sprite';\nimport {loadImage} from './loaders';\n\nexport function loadBackgroundLayers(){\n    return loadImage(\"src/images/main-bg.png\").then((mainImg) => {\n      const mainBg = new Sprite(mainImg, 600, 450);\n      mainBg.create(\"mainBg\", 0, 0);\n\n      return mainBg;\n    });\n}\n\nexport function loadBackgroundTiles(){\n    return loadImage(\"src/images/jungle_tileset.png\")\n        .then((jungleImg) => {\n            \n            const jungleTiles = new Sprite(jungleImg, 30, 30);\n            jungleTiles.create(\"flatGround\", 70, 225);\n            jungleTiles.create(\"ground\", 354, 210);\n            jungleTiles.create(\"greenGrass\", 161, 33);\n            jungleTiles.create('obstacleGrass', 64, 34, 80, 60);\n            return jungleTiles;\n    });\n}\n\nexport function loadPrincessIdle() {\n  return loadImage(\"src/images/princess/Idle.png\").then((princessIdleImg) => {\n\n    const princessIdle = new Sprite(princessIdleImg, 30, 30);\n    princessIdle.create(\"idle-1\", 24, 11);\n    princessIdle.create(\"idle-2\", 24, 59);\n    princessIdle.create(\"idle-3\", 24, 303);\n    return princessIdle;\n  });\n}\n\nexport function loadPrincessRun() {\n  return loadImage(\"src/images/princess/Run.png\").then((princessRunImg) => {\n\n    const princessRun = new Sprite(princessRunImg, 30, 30);\n    princessRun.create(\"run-1\", 24, 11);\n    princessRun.create(\"run-2\", 24, 59);\n    princessRun.create(\"run-3\", 24, 153);\n    return princessRun;\n  });\n}\n\nexport function loadEnemyWalk() {\n  return loadImage(\"src/images/enemies/walk.png\").then((enemyWalkImg) => {\n\n    const enemyWalk = new Sprite(enemyWalkImg, 20, 20);\n    enemyWalk.create(\"walk-1\", 29, 14);\n    enemyWalk.create(\"walk-2\", 29, 60);\n    enemyWalk.create(\"walk-3\", 29, 109);\n    return enemyWalk;\n  });\n}","class Matrix{\n    constructor(){\n        this.table = [];\n    }\n\n    set(x,y,value){\n        if(!this.table[x]){\n            this.table[x] = [];\n        }\n        this.table[x][y] = value;\n    }\n\n    get(x,y){\n        if(this.table[x]){\n            return this.table[x][y]\n        }else{\n            return undefined;\n        }\n\n    }\n}\n\nwindow.Matrix = Matrix;\n\nexport default Matrix;","import PosConverter from './pos-converter';\n\nclass TileCollider {\n    constructor(tilesMatrix) {\n        this.tiles = new PosConverter(tilesMatrix);\n    }\n\n    checkCollisionY(character){\n      \n        let y;\n        if (character.vel.y > 0) {\n            y = character.pos.y + character.size.y\n        } else if (character.vel.y < 0 ) {\n            y = character.pos.y;\n        } else {\n            return;\n        }\n        \n        const matches = this.tiles.getByRange(character.pos.x, character.pos.x + character.size.x, y, y);\n        \n            matches.forEach(match=>{\n                if (match.tile.name !== 'flatGround' && match.tile.name !== 'ground' && match.tile.name !== 'greenGrass'){\n                    return\n                }\n                if(character.vel.y > 0){\n        \n                    if (character.pos.y + character.size.y >= match.ytop) {\n                        character.pos.y = match.ytop - character.size.y;\n                        character.vel.y = 0;\n    \n                    }\n                } else if (character.vel.y < 0) {\n                    if (character.pos.y < match.ybottom) {\n                        character.pos.y = match.ybottom;\n                        character.vel.y = 0;\n                    }\n                }\n    \n            })\n\n    \n    }\n\n    checkCollisionX(character) {\n        let x;\n         \n        if (character.vel.x > 0) {\n            x = character.pos.x + character.size.x\n        } else if (character.vel.x < 0) {\n            x = character.pos.x;\n        } else {\n            return;\n        }\n\n        const matches = this.tiles.getByRange(x, x, character.pos.y, character.pos.y + character.size.y)\n\n       \n        matches.forEach(match=>{\n            if (match.tile.name !== 'flatGround' && match.tile.name !== 'ground' && match.tile.name !== 'greenGrass') {\n                return\n            }\n            if (character.vel.x > 0) { \n                if (character.pos.x + character.size.x > match.xleft) {\n                    character.pos.x = match.xleft - character.size.x;\n                    character.vel.x = 0;\n\n                    if(character.walk){\n                        character.walk.enemyDir = -1;\n                        character.walk.distance = 0;\n                    }\n                }\n            } else if (character.vel.x < 0) {\n                if (character.pos.x < match.xright) {\n                    character.pos.x = match.xright;\n                    character.vel.x = 0;\n                    if (character.walk) {\n                        character.walk.enemyDir = 1;\n                        character.walk.distance = 0;\n                    }\n                }\n            }\n\n        })\n    }\n\n}\n\nexport default TileCollider;","import Sound from '../dashboard/sound';\n\nclass CharactersCollider{\n    constructor(characters){\n        this.characters = characters;\n        this.sound = new Sound(\"src/audios/collision.wav\")\n    }\n\n    check(obj){\n        let result = false;\n        this.characters.forEach(character => {\n            if(character === obj){\n                result = false;\n                return;\n            }\n            if(character.boundaries.isCollide(obj.boundaries)){\n                console.log('Collide! GAME OVER')\n                this.sound.play();\n                result = true;\n            }\n        })\n        return result;\n    }\n}\n\nexport default CharactersCollider;","import Sound from '../dashboard/sound';\n\nclass Drop{\n    constructor(){\n        this.sound = new Sound(\"src/audios/drop.wav\");\n    }\n\n    check(character){\n        if(character.pos.y + character.size.y > 350){\n            console.log('Drop! Game Over!');\n            this.sound.play();\n            return true\n        }\n        return false;\n    }\n}\n\nexport default Drop;","import Matrix from './matrix';\nimport TileCollider from '../collision/tile-collider';\nimport CharactersCollider from '../collision/characters-collider';\nimport Drop from '../collision/drop';\n\nexport default class Layer {\n    constructor(){\n        this.layers = [];\n        this.tiles = new Matrix();\n        this.characters = new Set();\n        this.charactersCollider = new CharactersCollider(this.characters);\n        this.tileCollider = new TileCollider(this.tiles);\n        this.characterDrop = new Drop();\n        this.gameOver = false;\n    }\n\n    draw(context, camera=0){\n        this.layers.forEach(layer => {\n            layer(context, camera)\n        })\n    }\n\n    update(timestep, camera){\n        const gravity = 2000;\n        this.characters.forEach(character => {\n            // princess\n            if(character.jump){\n                character.jump.update(character, timestep);\n                character.run.update(character, timestep);\n                character.player.update(timestep);\n            }\n            \n            // enemy\n            if(character.walk){\n                character.walk.update(character, timestep);\n            }\n            \n            character.pos.x += character.vel.x * timestep;\n            this.tileCollider.checkCollisionX(character);\n\n            character.pos.y += character.vel.y * timestep;\n            this.tileCollider.checkCollisionY(character);\n                                    \n            character.vel.y += gravity * timestep;\n            \n            // Game logic, lose when drop\n            if(character.jump){\n                if(this.characterDrop.check(character)){\n                    character.player.reset();\n                    this.gameOver = true;\n                    return;\n                };\n            }\n\n        })\n        \n\n        // Game logic, lose when collide\n        this.characters.forEach(character => {\n            if(this.charactersCollider.check(character)){\n                character.player.reset();\n                this.gameOver = true;\n            };\n        })\n    }\n}\n\n","class Vector{\n    constructor(x, y) {\n        this.setVector(x, y);\n    }\n\n    setVector(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\nexport default Vector;","class MovingObjectBoundary{\n    constructor(pos, size){\n        this.pos = pos;\n        this.size = size;\n    }\n\n    isCollide(obj){\n        return this.getBottom() > obj.getTop() \n            && this.getTop() < obj.getBottom() \n            && this.getLeft() < obj.getRight()\n            && this.getRight() > obj.getLeft();\n    }\n\n    getBottom(){\n        return this.pos.y + this.size.y;\n    }\n\n    getTop(){\n        return this.pos.y\n    }\n\n    getLeft(){\n        return this.pos.x\n    }\n\n    getRight(){\n        return this.pos.x + this.size.x\n    }\n}\n\nexport default MovingObjectBoundary;","import Vector from './vectors';\nimport MovingObjectBoundary from './moving_objects_boundaries';\n\nclass MovingObject{\n    constructor(){\n        this.pos = new Vector(0,0);\n        this.vel = new Vector(0, 0);\n        this.size = new Vector(0,0);\n        this.boundaries = new MovingObjectBoundary(this.pos, this.size);\n    }\n    \n    update(timestep){\n        // multiplying the velocity by the amount of time (timestep)\n        // that has passed between rendering frames\n        this.pos.x += this.vel.x * timestep ;\n        this.pos.y += this.vel.y * timestep *1.8;      \n    }\n\n}\n\nexport default MovingObject;","import Sound from '../dashboard/sound';\n\nclass Jump{\n    constructor(){\n        this.duration = 0.1;\n        this.exactTime = 0;\n        this.velocityY= 500;\n        this.velocityX = 20;\n        this.sound = new Sound(\"src/audios/jump.wav\")\n        this.sound.setVolumne(0.3)\n    }\n\n    start(){\n        this.exactTime = this.duration;\n        this.sound.play();\n    }\n\n    stop(){\n        this.exactTime = 0;\n    }\n\n    update(character, timestep){\n        if(this.exactTime > 0){    \n            character.vel.y = -this.velocityY;\n            this.exactTime -= timestep;\n        }\n\n    }\n}\n\nexport default Jump;","class Run {\n    constructor() {\n        this.speed = 300;\n        this.dir = 0;\n        this.distance = 0;\n    }\n\n    update(character, timestep) {\n \n        character.vel.x = this.speed * this.dir * timestep;\n        if (this.dir){\n            this.distance += Math.abs(character.vel.x * timestep);\n        } else{\n            this.distance = 0;\n        }\n    }\n}\n\nexport default Run;","class Timer{\n    constructor(time=0){\n        this.time = time;\n        this.timerBuffer = document.createElement('canvas');\n        this.timerBuffer.height = 390;\n        this.timerBuffer.width = 600;\n        this.timerBufferContext = this.timerBuffer.getContext('2d');\n        this.timerBufferContext.font = \"30px VT323\";\n        this.timerBufferContext.fillStyle = 'white';\n    }\n\n    updateTime(timestep){\n        this.time += timestep\n    }\n\n    resetTime(){\n        this.time = 0\n    }\n\n    draw(context, x, y){\n        this.timerBufferContext.clearRect(0,0,600,390)\n        this.timerBufferContext.fillText(`Time: ${Math.round(this.time)}`, x, y)\n\n        context.drawImage(this.timerBuffer, 0, 0)\n    }\n}\n\nexport default Timer;","// Add a player control property to princess, then add \n// timer & score to player control\n// Create a dashboard to display timer and score\nimport Timer from './dashboard/timer';\n\nclass Player{\n    constructor(){\n        this.score = 0;\n        this.timer = new Timer();\n    }\n\n    update(timestep){\n        this.timer.updateTime(timestep);\n    }\n\n    reset(){\n        this.timer.resetTime();\n    }\n}\n\nexport default Player;","class EnemyWalk {\n    constructor() {\n        this.speed = 4000;\n        this.enemyDir = -1;\n        this.distance = 0;\n    }\n\n    update(character, timestep) {\n        character.vel.x = this.speed * this.enemyDir * timestep;\n        this.distance += Math.abs(character.vel.x * timestep);\n    }\n}\n\nexport default EnemyWalk;","export default class FixedTimeLoop{\n    constructor(timestep = 1/60){\n        let accumulated_time = 0;\n        let new_time_stamp;\n        let old_time_stamp = 0;\n        this.requestId = undefined;\n        this.gameOver = false;\n        this.updateTime = (timestamp) => {\n            if(new_time_stamp === undefined){\n                new_time_stamp = timestamp;\n            }\n            accumulated_time += (timestamp - new_time_stamp)/1000;\n           \n            // only update when accumulated time > timestep\n\n                while (accumulated_time > timestep){\n                    if(this.update(timestep)==='Game Over'){\n                        this.gameOver = true;\n                    };\n                    accumulated_time -= timestep;\n                }\n                new_time_stamp = timestamp;\n                if(!this.gameOver){\n                    this.start();\n                }else{            \n                    accumulated_time = 0;\n                    cancelAnimationFrame(this.requestId);\n                    new_time_stamp = undefined;\n                    this.requestId = undefined;\n                }\n        }\n    }\n\n    start(){\n        this.requestId = requestAnimationFrame(this.updateTime)\n    }\n\n    stop(){\n        cancelAnimationFrame(this.requestId)\n    }\n\n    \n}","class KeyboardInput{\n    constructor(character){\n        this.rightPressed = false;\n        this.leftPressed = false;\n        this.spacePressed = false;\n        this.character = character;\n        this.keyDownHandler = this.keyDownHandler.bind(this);\n        this.keyUpHandler = this.keyUpHandler.bind(this);\n    }\n\n    keyDownHandler(event) {\n        event.preventDefault();\n        if (event.keyCode === 39) {\n           \n            this.character.run.dir = event.keyCode;\n            this.rightPressed = true;\n        }\n        else if (event.keyCode === 37) {\n            this.character.run.dir = -event.keyCode;\n            this.leftPressed = true;\n        }\n        if (event.keyCode === 32) {\n            // avoid jump stack\n            if (this.character.jump.exactTime === 0 && Math.abs(this.character.vel.y) < 34){\n                this.character.jump.start();\n                this.spacePressed = true;\n            }\n        }\n}\n\n    keyUpHandler(event) {\n        event.preventDefault();\n        if (event.keyCode === 39) {\n            this.character.run.dir = 0;\n            this.rightPressed = false;\n        }\n        else if (event.keyCode === 37) {\n            this.character.run.dir = 0;\n            this.leftPressed = false;\n        }\n        if (event.keyCode === 32) {\n            this.character.jump.stop();\n            this.spacePressed = false;\n        }\n    }\n\n    listenKeys(window){\n\n        window.addEventListener('keydown', this.keyDownHandler);\n        window.addEventListener('keyup', this.keyUpHandler);\n    }\n}\n\nexport default KeyboardInput;","import Vector from './movements/vectors';\n\nclass Camera{\n    constructor(){\n        this.pos = new Vector(0,0);\n        this.size = new Vector(600, 390);\n    }\n}\n\nexport default Camera;","\nexport function createTitleLayer(text, x, y, font, size=45){\n    const titleBuffer = document.createElement('canvas');\n    titleBuffer.height = 390;\n    titleBuffer.width = 600;\n    const titleBufferContext = titleBuffer.getContext('2d');\n    titleBufferContext.font = size + \"px \" + font;\n    titleBufferContext.fillStyle = \"white\";\n    titleBufferContext.textAlign = \"center\";\n    return function drawTitleLayer(context){\n        titleBufferContext.clearRect(0,0,600, 390);\n        titleBufferContext.fillText(text,x,y);\n        context.drawImage(titleBuffer, 0, 0);\n    }\n}\n\nexport function createButtonLayer(button) {\n    const buttonBuffer = document.createElement('canvas');\n    buttonBuffer.height = 390;\n    buttonBuffer.width = 600;\n    const buttonBufferContext = buttonBuffer.getContext('2d');\n    const fontSize = 25;\n    //buttonBufferContext.fillStyle = \"white\";\n    const textSize = buttonBufferContext.measureText(button.text);\n    buttonBufferContext.font = fontSize + \"px VT323\";\n    const textX = button.x + (button.width / 2) - fontSize;\n    const textY = button.y + (button.height / 2) + fontSize / 3;\n    const radius = 3;\n    buttonBufferContext.beginPath();\n    buttonBufferContext.moveTo(button.x + radius, button.y);\n    buttonBufferContext.arcTo(button.x + button.width, button.y, button.x + button.width, button.y + button.height, radius);\n    buttonBufferContext.arcTo(button.x + button.width, button.y + button.height, button.x, button.y + button.height, radius);\n    buttonBufferContext.arcTo(button.x, button.y + button.height, button.x, button.y, radius);\n    buttonBufferContext.arcTo(button.x, button.y, button.x + button.width, button.y, radius);\n    buttonBufferContext.strokeStyle = \"white\"\n    buttonBufferContext.stroke();\n    return function drawbuttonLayer(context, camera) {\n        buttonBufferContext.clearRect(0, 0, buttonBuffer.height, buttonBuffer.width);\n        if(!button.hovered){\n            buttonBufferContext.fillStyle = \"green\";\n        }else{\n            buttonBufferContext.fillStyle = \"#57AF55\"\n        }       \n        buttonBufferContext.fill();\n        buttonBufferContext.fillStyle = \"white\";\n        buttonBufferContext.fillText(button.text, textX, textY);\n        context.drawImage(buttonBuffer, 0, 0)\n    }\n}\n \n","import {createButtonLayer} from './dashboard-draw';\nclass Button{\n    constructor(text, x, y, width, height, canvas){\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.clicked = false;\n        this.hovered = false;\n        this.text = text;  \n        this.canvas = canvas;\n        this.offsetLeft = this.canvas.offsetLeft;\n        this.offsetTop = this.canvas.offsetTop;\n        this.hoverHandler = this.hoverHandler.bind(this);\n        this.clickHandler = this.clickHandler.bind(this);\n\n        this.buttonLayer = createButtonLayer(this)\n    }\n\n    getMousePos(event){\n        return {\n            x: event.clientX - this.offsetLeft,\n            y: event.clientY - this.offsetTop\n        };\n    }\n\n    hoverHandler(event, context){\n        event.preventDefault();\n        let mousePos = {\n            x: event.clientX - this.offsetLeft,\n            y: event.clientY - this.offsetTop\n        };\n\n        if (mousePos.x > this.x && mousePos.x < (this.x + this.width) && mousePos.y > this.y && mousePos.y < this.y + this.height){\n            this.hovered = true;\n            \n        }else{\n            this.hovered = false;\n                   \n        }\n        this.buttonLayer(context);\n        \n    }\n\n    clickHandler(event,context){\n        event.preventDefault();\n        const mousePos = {\n            x: event.clientX - this.offsetLeft,\n            y: event.clientY - this.offsetTop\n        };\n\n        const last_click = this.clicked;\n  \n        if (mousePos.x > this.x && mousePos.x < (this.x + this.width) && mousePos.y > this.y && mousePos.y < this.y + this.height){\n            context.clearRect(0, 0, 600,390)\n            if(!last_click){\n                this.clicked = true;\n                console.log('Start Game!');           \n                this.handler();}          \n            \n        }else{\n            this.clicked = false;\n            \n        }\n    }\n\n\n}\n\nexport default Button;","import Sound from './dashboard/sound';\nimport { loadLevel } from \"./loaders\";\nimport {\n    createGroundLayer,\n    createMainBgLayer,\n    createCharacterLayer,\n    createDashboardLayer,\n    createTileMatrix\n} from './levels/level-draw';\nimport {\n    loadBackgroundLayers,\n    loadBackgroundTiles,\n} from \"./sprite-load\";\nimport Layer from './levels/layers';\nimport { createPrincessIdle } from './princess';\nimport { createEnemyWalk } from './enemies';\nimport FixedTimeLoop from './fixed-time-loop';\nimport KeyboardInput from './keyboard-input';\nimport Camera from './camera';\nimport {\n    createTitleLayer,\n    createButtonLayer\n}from './dashboard/dashboard-draw';\nimport Button from './dashboard/button';\n\nclass Game{\n    constructor(ctx, canvas){\n        this.startMusic = new Sound(\"src/audios/background.ogg\");\n        this.gameOverMusic = new Sound(\"src/audios/game-over.mp3\");\n        this.buttonMusic = new Sound(\"src/audios/button.ogg\");\n        this.playerMusic = new Sound(\"src/audios/player-music.mp3\")\n        this.ctx = ctx;\n        this.canvas = canvas;\n        this.offsetLeft = this.canvas.offsetLeft;\n        this.offsetTop = this.canvas.offsetTop;\n        this.start = this.start.bind(this);\n        this.gameOverView = this.gameOverView.bind(this);\n        this.buttons = new Set();\n        this.bgs = [];\n        //this.showMainPage();\n    }\n\n    showMainPage(){\n        \n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n        Promise.all([\n            loadBackgroundLayers()\n        ]).then(([bg]) => {\n            const layer = new Layer();\n            layer.layers.push(createMainBgLayer(bg));\n            layer.layers.push(createTitleLayer('Forest', 300, 100, \"Bungee Shade\"));\n            layer.layers.push(createTitleLayer('Princess', 300, 150, \"Bungee Shade\"));\n            layer.layers.push(createTitleLayer('-- Press SPACE to jump --', 300, 290, \"VT323\", 20));\n            layer.layers.push(createTitleLayer('-- Press -> to move --', 300, 310, \"VT323\", 20));\n                              \n            const context = this.ctx;\n            const game = this;\n            \n            // background music\n            this.startMusic.loop();\n            //this.startMusic.play();\n\n            const startBtn = new Button('start', 260, 220, 80, 30, this.canvas, this.ctx, game);\n            //const quitBtn = new Button('quit', 260, 260, 80, 30, this.canvas);\n\n            function hover(e){\n                e.preventDefault();\n                startBtn.hoverHandler(e, context);\n                //quitBtn.hoverHandler(e, context);\n            }\n\n            function click(e){\n                e.preventDefault();\n                startBtn.clickHandler(e, context);\n                //quitBtn.clickHandler(e, context);\n            }\n\n            window.addEventListener('mousemove', hover, true)\n            window.addEventListener('click', click, true)\n            \n            startBtn.handler = function(){\n                window.removeEventListener('mousemove', hover, true)\n                window.removeEventListener('click', click, true)\n                layer.layers = [];\n                game.buttonMusic.play();\n                game.start();\n                return;\n            }\n            \n            // quitBtn.handler = function () {\n            //     window.removeEventListener('mousemove', hover, true)\n            //     window.removeEventListener('click', click, true)\n            //     layer.layers = [];\n            //     game.showMainPage();\n            //     return\n            // }\n            \n            layer.layers.push(createButtonLayer(startBtn))\n            //layer.layers.push(createButtonLayer(quitBtn))\n\n\n            // mouse events\n  \n            layer.draw(context)\n            \n        })\n    }\n\n    start(){\n        this.ctx.clearRect(0,0,this.canvas.width, this.canvas.height);\n        this.startMusic.pause();\n        Promise.all([\n            loadBackgroundLayers(),\n            loadBackgroundTiles(),\n            loadLevel(\"level-1\"),\n            createPrincessIdle(),\n            createEnemyWalk(),\n        ]).then(([mainBg, jungleTiles, level, princessIdle, enemy]) => {\n            const player = princessIdle.player;\n            enemy.pos.setVector(600, 0);\n\n            // push to layers array and draw\n            const layer = new Layer();\n            \n            // create matrix\n            createTileMatrix(level.backgrounds, layer.tiles)\n\n            layer.layers.push(createMainBgLayer(mainBg));\n            layer.layers.push(createGroundLayer(jungleTiles, layer.tiles));\n            layer.layers.push(createCharacterLayer(princessIdle));\n            layer.layers.push(createCharacterLayer(enemy));\n            layer.layers.push(createDashboardLayer(player))\n\n            // add to characters\n            layer.characters.add(princessIdle);\n            layer.characters.add(enemy);\n\n            // scrolling camera\n            const camera = new Camera;\n\n            // keyboard input\n            const input = new KeyboardInput(princessIdle);\n            input.listenKeys(window);\n\n            // background music\n            this.playerMusic.setVolumne(0.8);\n            this.playerMusic.loop();\n            this.playerMusic.play();\n            \n            const game = this;\n            const context = this.ctx;\n            const canvas = this.canvas;\n            const fixedLoop = new FixedTimeLoop(1/60);\n            fixedLoop.update = function update(timestep) {\n                if(!layer.gameOver){\n\n                    layer.update(timestep, camera);\n    \n                    if (princessIdle.pos.x > 100) {\n                        camera.pos.x = princessIdle.pos.x - 100;\n                    }\n                    layer.draw(context, camera);\n                }else{\n                    layer.layers = null;\n                    layer.characters = null;\n                    princessIdle.player.reset();\n                    princessIdle.player.timer.resetTime();\n                    game.gameOverView();\n                     \n                    return 'Game Over';\n                }\n\n            }\n            fixedLoop.start();\n        });\n    }\n\n    gameOverView(){\n        this.playerMusic.pause();\n        this.gameOverMusic.play();\n        const layer = new Layer();\n\n        layer.layers.push(createTitleLayer('Game Over', 300, 100, \"VT323\"))\n        // createTitleLayer('Game Over', 300, 100, \"VT323\")(this.ctx);\n        const game = this;\n        const context = this.ctx;\n        \n        const restartBtn = new Button('start', 260, 220, 80, 30, this.canvas);\n        const quitBtn = new Button('quit', 260, 260, 80, 30, this.canvas);\n\n        function hover(e) {\n            e.preventDefault();\n            restartBtn.hoverHandler(e, context);\n            quitBtn.hoverHandler(e, context);\n        }\n\n        function click(e) {\n            e.preventDefault();\n            restartBtn.clickHandler(e, context);\n            quitBtn.clickHandler(e, context);\n        }\n\n        // mouse event\n        window.addEventListener('mousemove', hover, true)\n        window.addEventListener('click', click, true)\n\n        restartBtn.handler = function () {\n            window.removeEventListener('mousemove', hover, true)\n            window.removeEventListener('click', click, true)\n            layer.layers = [];\n            game.buttonMusic.play();\n            game.start();\n            return\n        }\n\n        \n        quitBtn.handler = function () {\n            window.removeEventListener('mousemove', hover, true)\n            window.removeEventListener('click', click, true)\n            layer.layers = [];\n            game.buttonMusic.play();\n            return game.showMainPage();\n            \n        }\n\n        layer.layers.push(createButtonLayer(restartBtn))\n        layer.layers.push(createButtonLayer(quitBtn))\n\n\n        layer.draw(context)\n    }\n}\n\nexport default Game;","import MovingObject from './movements/moving_objects';\nimport {loadPrincessIdle, loadPrincessRun} from './sprite-load';\nimport Jump from './movements/jump';\nimport Run from './movements/run';\n\nimport Player from './player';\n\nexport function createPrincessIdle(){\n    return Promise.all([\n        loadPrincessIdle(),\n        loadPrincessRun()\n    ]\n    ).then(([pIdle, pRun]) => {\n            const princess = new MovingObject();\n            princess.size.setVector(60, 60)\n\n            princess.jump = new Jump();\n            princess.run = new Run();\n            princess.player = new Player();\n            \n            const pRuns = ['run-1', 'run-2', 'run-3']\n            \n            princess.draw = function drawPrincess(context){\n                        \n                let pRunsIdx = (Math.floor(princess.run.distance / 10)) % pRuns.length;\n                if(princess.run.dir !== 0){\n                    pRun.draw(pRuns[pRunsIdx], context, 0,0,3,3, princess.run.dir < 0);\n                }else{\n                    pIdle.draw(\"idle-1\", context, 0, 0, 3, 3);\n                }\n                                \n            }\n            return princess;\n        })\n}","import MovingObject from './movements/moving_objects';\nimport { loadEnemyWalk } from './sprite-load';\nimport EnemyWalk from './movements/enemy_walk';\n\nexport function createEnemyWalk() {\n    return Promise.all([\n        loadEnemyWalk(),\n    ]\n    ).then(([enemyWalk]) => {\n        const enemy = new MovingObject();\n        enemy.size.setVector(45, 55)\n\n        enemy.walk = new EnemyWalk();\n\n        const eWalks = ['walk-1', 'walk-2', 'walk-3']\n\n        enemy.draw = function drawEnemy(context) {\n            \n            let enemyWalkIdx = (Math.floor(enemy.walk.distance / 10)) % eWalks.length; \n          \n            enemyWalk.draw(eWalks[enemyWalkIdx], context, 0, 0, 3, 3, enemy.walk.enemyDir < 0);                        \n        }\n        return enemy;\n    })\n}","import \"./styles/index.scss\";\nimport './scripts/loaders';\nimport Game from './scripts/game';\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const canvas = document.getElementsByTagName(\"canvas\")[0];\n  const ctx = canvas.getContext(\"2d\", { alpha: false });\n  const offsetLeft = canvas.offsetLeft;\n  const offsetTop = canvas.offsetTop;\n\n  const game = new Game(ctx, canvas);\n  game.showMainPage();\n\n\n});"],"sourceRoot":""}